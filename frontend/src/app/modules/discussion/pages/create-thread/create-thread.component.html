<div class="max-w-3xl mx-auto py-10 px-6 font-sans">
    <div class="mb-8 flex items-center gap-4">
        <a routerLink="/discussion"
            class="text-slate-500 hover:text-slate-700 transition-colors cursor-pointer p-2 rounded-lg bg-slate-50 border border-slate-200 shadow-sm">
            <lucide-icon name="arrow-left" class="w-5 h-5"></lucide-icon>
        </a>
        <h1 class="text-xl font-bold text-slate-900 m-0">Create New Discussion</h1>
    </div>

    <form [formGroup]="threadForm" (ngSubmit)="onSubmit()"
        class="bg-white rounded-xl shadow-sm border border-slate-200 p-8">
        <div class="mb-6">
            <label for="title" class="block text-sm font-semibold text-slate-700 mb-2">Subject</label>
            <input id="title" type="text" formControlName="title"
                class="w-full px-4 py-2 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition"
                placeholder="What's this discussion about?">
            <div *ngIf="threadForm.get('title')?.touched && threadForm.get('title')?.invalid"
                class="text-xs text-red-500 mt-1">
                Title is required.
            </div>
        </div>

        <div class="mb-8">
            <label for="content" class="block text-sm font-semibold text-slate-700 mb-2">Message</label>
            <textarea id="content" formControlName="content" rows="8"
                class="w-full px-4 py-2 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition resize-none"
                placeholder="Type your message here..."></textarea>
            <div *ngIf="threadForm.get('content')?.touched && threadForm.get('content')?.invalid"
                class="text-xs text-red-500 mt-1">
                Message content is required.
            </div>
        </div>

        <div class="flex justify-end gap-3 pt-6 border-t border-slate-100">
            <button type="button" routerLink="/discussion"
                class="px-6 py-2.5 rounded-lg text-slate-600 hover:bg-slate-50 font-medium transition-colors">
                Cancel
            </button>
            <button type="submit" [disabled]="threadForm.invalid || loading"
                class="px-6 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
                <span *ngIf="loading"
                    class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                {{ loading ? 'Publishing...' : 'Publish Discussion' }}
            </button>
        </div>
    </form>
</div>